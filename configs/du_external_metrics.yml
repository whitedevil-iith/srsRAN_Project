# Example srsRAN DU Configuration with External Metrics Collection
# This configuration enables collection of metrics from cAdvisor and Node Exporter

f1ap:
  cu_cp_addr: 127.0.10.1
  bind_addr: 127.0.10.2

f1u:
  socket:
    -
      bind_addr: 127.0.10.2

ru_sdr:
  device_driver: uhd
  device_args: type=b200,num_recv_frames=64,num_send_frames=64
  srate: 23.04
  otw_format: sc12  
  tx_gain: 80
  rx_gain: 40

cell_cfg:
  dl_arfcn: 650000
  band: 78
  channel_bandwidth_MHz: 20
  common_scs: 30
  plmn: "00101"
  tac: 7
  pci: 1

# Metrics Configuration
metrics:
  # Enable automatic stdout metrics reporting
  autostart_stdout_metrics: true

# External Metrics Configuration
external_metrics:
  # Enable external metrics collection
  enable: true
  
  # cAdvisor endpoint for Docker container metrics
  # Default: http://localhost:8080/api/v1.3/docker
  cadvisor_endpoint: "http://localhost:8080/api/v1.3/docker"
  
  # Node Exporter endpoint for host system metrics  
  # Default: http://localhost:9100/metrics
  node_exporter_endpoint: "http://localhost:9100/metrics"
  
  # Enable human-readable log output
  enable_log_metrics: true
  
  # Enable JSON output (forwarded to WebSocket subscribers)
  enable_json_metrics: true

# Remote Control Configuration (for WebSocket metrics subscription)
remote_control:
  enabled: true
  bind_address: "0.0.0.0"
  port: 55555
  enable_metrics_subscription: true

# Logging Configuration
log:
  filename: /tmp/du.log
  all_level: info

# Resource usage metrics (built-in)
rusage:
  enable_app_usage: true
  enable_log_metrics: true
  enable_json_metrics: true

pcap:
  mac_enable: false
  mac_filename: /tmp/du_mac.pcap
  f1ap_enable: false
  f1ap_filename: /tmp/du_f1ap.pcap
  f1u_enable: false
  f1u_filename: /tmp/du_f1u.pcap
